{% extends "base.html" %}

{% block title %}Simulation Playground - Game Night Tracker{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/playground.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
{% endblock %}

{% block content %}
<div class="playground-container">
    <!-- Header with Team Selection and Win Possibility -->
    <div class="playground-header">
        <div class="playground-header-top">
            <a href="{{ url_for('main.index') }}" class="btn-back">
                <i class="fas fa-arrow-left"></i> Back to Home
            </a>
            <div class="page-icon">
                <i class="fas fa-chart-line"></i>
            </div>
        </div>
        <h1>Simulation Playground</h1>
        <p>Explore hypothetical game outcomes and find your path to victory</p>
    </div>

    <!-- Team Selector -->
    <div class="team-selector-section">
        <div id="teamSelectorContainer"></div>
    </div>

    <!-- Win Possibility Banner -->
    <div class="win-possibility-section">
        <div id="winPossibilityContainer"></div>
    </div>

    <!-- Win Simulator -->
    <div class="simulator-section">
        <div id="winSimulatorContainer"></div>
    </div>

    <!-- Current Standings -->
    <div class="standings-section">
        <h2 class="section-title"><i class="fas fa-list-ol"></i> Current Standings</h2>
        <div class="standings-list" id="currentStandings">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <!-- Game Simulations -->
    <div class="games-section">
        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-gamepad"></i> Upcoming Games</h2>
            <button class="btn-reset-all" id="resetAllBtn">Reset All</button>
        </div>
        <div id="gamePlacementContainer">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <!-- Simulated Standings -->
    <div class="standings-section">
        <h2 class="section-title"><i class="fas fa-crystal-ball"></i> Projected Results</h2>
        <div id="outcomeSummaryContainer" class="outcome-summary-wrapper"></div>
        <div class="standings-list" id="simulatedStandings">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <!-- Share Scenario -->
    <div class="share-section">
        <div id="shareScenarioContainer"></div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Pass data from backend to JavaScript
window.playgroundTeams = {{ teams_json|tojson }};
window.playgroundGames = {{ upcoming_games_json|tojson }};
</script>
<script src="{{ url_for('static', filename='js/playground.js') }}"></script>
{% endblock %}
